# Диагностика контроллера WB-MR6LV/I

## Назначение
Проверка дискретных входов и релейных выходов перед монтажом.

## Инструмент
Используется CLI-скрипт диагностики:
```
python -m gravity_controller_operator.diagnostics_cli --device /dev/ttyACM0 --slave-id 90 --mode full
```

Параметры:
- `--device` — путь к RS-485 адаптеру (например, `/dev/ttyACM0`)
- `--slave-id` — Modbus slave id контроллера
- `--mode` — `full` (DI + реле), `di` (только DI), `relays` (только реле)

## Диагностика дискретных входов (DI)
Скрипт последовательно запрашивает подачу сигнала на входы DI0..DI6.
Особенность: порядок DI определяется по карте адресов контроллера, поэтому
скрипт сам сопоставляет физический вход и внутренний канал.

Порядок:
1. Следуйте подсказкам в терминале.
2. На каждом шаге подайте сигнал на указанный вход и снимите его.
3. При ошибке доступно повторить шаг или пропустить.

## Диагностика реле
Скрипт по очереди переключает реле 1..6:
1. Реле включается (ожидается замыкание).
2. Реле выключается (ожидается размыкание).
3. Пользователь подтверждает состояние мультиметром.

## Результат
- подтверждена работоспособность DI и реле
- зафиксированы проблемные каналы (если есть)

## Примечания
- Для запуска только DI используйте `--mode di`.
- Для запуска только реле используйте `--mode relays`.
